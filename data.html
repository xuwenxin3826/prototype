<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据管理与分析 - 机器人管理平台</title>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        
        :root {
            --primary-color: #1890ff;
            --primary-light: #e6f7ff;
            --success-color: #52c41a;
            --warning-color: #faad14;
            --error-color: #f5222d;
            --info-color: #1890ff;
            --bg-color: #f0f2f5;
            --sidebar-bg: #001529;
            --header-bg: #fff;
            --card-bg: #fff;
            --text-primary: #000000e0;
            --text-secondary: #000000a6;
            --border-color: #f0f0f0;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            overflow-x: hidden;
        }
        
        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* 侧边栏样式 */
        .sidebar {
            width: 256px;
            background-color: var(--sidebar-bg);
            color: rgba(255, 255, 255, 0.85);
            transition: all 0.3s;
            position: relative;
            z-index: 10;
        }
        
        .sidebar-header {
            height: 64px;
            display: flex;
            align-items: center;
            padding: 0 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo i {
            font-size: 24px;
            color: var(--primary-color);
        }
        
        .logo-text {
            font-size: 18px;
            font-weight: 600;
            color: white;
        }
        
        .nav-menu {
            padding: 16px 0;
        }
        
        .nav-item-wrapper {
            margin-bottom: 4px;
        }
        
        .nav-item {
            position: relative;
            display: flex;
            align-items: center;
            padding: 12px 24px;
            cursor: pointer;
            transition: all 0.3s;
            color: rgba(255, 255, 255, 0.65);
            text-decoration: none;
        }
        
        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .nav-item.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        /* 父菜单高亮（当子菜单被选中时） */
        .nav-item.active-parent {
            background-color: rgba(24, 144, 255, 0.2);
            color: white;
            border-right: 3px solid var(--primary-color);
        }
        
        .arrow-icon {
            margin-left: auto;
            font-size: 12px;
            transition: transform 0.3s;
            opacity: 0.7;
        }
        
        .arrow-icon.rotated {
            transform: rotate(180deg);
        }
        
        .sub-nav-menu {
            background-color: rgba(0, 0, 0, 0.15);
            overflow: hidden;
            transition: all 0.3s ease-in-out;
        }
        
        .nav-item.sub-item {
            padding: 10px 24px 10px 48px;
            font-size: 13px;
            border-left: 2px solid transparent;
            margin-left: 0;
        }
        
        .nav-item.sub-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: white;
            border-left-color: rgba(255, 255, 255, 0.3);
        }
        
        .nav-item.sub-item.active {
            background-color: rgba(24, 144, 255, 0.25);
            color: #fff;
            border-left-color: var(--primary-color);
            font-weight: 500;
        }
        
        .nav-item.sub-item i {
            font-size: 14px;
            width: 18px;
            margin-right: 8px;
        }
        
        .nav-item i {
            font-size: 16px;
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }
        
        /* 主内容区样式 */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .header {
            height: 64px;
            background-color: var(--header-bg);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            z-index: 9;
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .header-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .content-wrapper {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }
        
        /* 卡片样式 */
        .card {
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 24px;
            overflow: hidden;
        }
        
        .card-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .card-body {
            padding: 24px;
            min-height: 400px;
        }
        
        /* Tab 样式 */
        .data-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 24px;
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 0 24px;
        }
        
        .tab-item {
            padding: 16px 24px;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 14px;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab-item:hover {
            color: var(--primary-color);
        }
        
        .tab-item.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            font-weight: 600;
        }
        
        /* 统计卡片 */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-bottom: 24px;
        }
        
        .stat-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .stat-icon.blue { background-color: #e6f7ff; color: var(--primary-color); }
        .stat-icon.green { background-color: #f6ffed; color: var(--success-color); }
        .stat-icon.orange { background-color: #fff7e6; color: var(--warning-color); }
        .stat-icon.red { background-color: #fff1f0; color: var(--error-color); }
        
        .stat-info h3 {
            font-size: 28px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .stat-info p {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        /* 数据清洗规则配置样式 */
        .page-content {
            padding: 0;
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .page-desc {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 24px;
            line-height: 1.5;
        }
        
        .form-section {
            margin-bottom: 24px;
        }
        
        .form-section h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .form-row {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            padding: 8px 0;
        }
        
        .form-row label {
            width: 200px;
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }
        
        .form-row select {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .form-row select:focus {
            border-color: var(--primary-color);
        }
        
        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn:hover {
            background-color: #40a9ff;
        }
        
        .btn-secondary {
            background-color: #f5f5f5;
            color: var(--text-primary);
        }
        
        .btn-secondary:hover {
            background-color: #e8e8e8;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 16px;
            height: 16px;
        }
        
        .checkbox-item label {
            font-size: 14px;
            color: var(--text-primary);
            cursor: pointer;
        }
        
        /* 表格样式 */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }
        
        .data-table thead {
            background-color: #fafafa;
        }
        
        .data-table th {
            padding: 12px;
            text-align: left;
            font-weight: 500;
            color: var(--text-primary);
            border-bottom: 1px solid var(--border-color);
            font-size: 14px;
        }
        
        .data-table td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
            font-size: 14px;
        }
        
        .data-table tbody tr:hover {
            background-color: #fafafa;
        }
        
        .status-ok {
            color: var(--success-color);
            font-weight: 500;
        }
        
        .status-warn {
            color: var(--warning-color);
            font-weight: 500;
        }
        
        /* 空白占位样式 */
        .empty-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            min-height: 400px;
            color: #999;
        }
        
        .empty-placeholder i {
            font-size: 64px;
            margin-bottom: 16px;
            color: #d9d9d9;
        }

        /* 复选框网格样式 */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .checkbox-item {
            position: relative;
        }
        
        .checkbox-item input[type="checkbox"] {
            display: none;
        }
        
        .checkbox-item label {
            display: flex;
            flex-direction: column;
            padding: 16px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: #fafafa;
        }
        
        .checkbox-item label:hover {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
            transform: translateY(-2px);
        }
        
        .checkbox-item input[type="checkbox"]:checked + label {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
            box-shadow: 0 2px 8px rgba(24, 144, 255, 0.1);
        }
        
        .checkbox-item label i {
            font-size: 18px;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .checkbox-item label span {
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .checkbox-item label small {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* 数据源统计样式 */
        .data-source-stats {
            display: flex;
            gap: 24px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        
        .stat-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        /* 章节头部样式 */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-actions {
            display: flex;
            gap: 8px;
        }
        
        /* 记录摘要样式 */
        .records-summary {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .summary-item {
            display: flex;
            align-items: center;
            padding: 16px;
            background-color: #fafafa;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .summary-icon {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            font-size: 20px;
        }
        
        .summary-info {
            flex: 1;
        }
        
        .summary-value {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.2;
        }
        
        .summary-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* 紧凑表格样式 */
        .compact-table-container {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .compact-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        .compact-table thead {
            background-color: #fafafa;
        }
        
        .compact-table th {
            padding: 12px 16px;
            text-align: left;
            font-weight: 500;
            color: var(--text-primary);
            border-bottom: 1px solid var(--border-color);
        }
        
        .compact-table td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .compact-table tbody tr:hover {
            background-color: #fafafa;
        }
        
        .time-cell {
            display: flex;
            flex-direction: column;
        }
        
        .time-date {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .time-clock {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .data-source-cell {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .data-source-cell i {
            color: var(--primary-color);
            font-size: 14px;
        }
        
        .count-cell {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .count-cell.warning {
            color: var(--warning-color);
        }
        
        .status-tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-weight: 500;
        }
        
        /* 表格底部样式 */
        .table-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background-color: #fafafa;
            border-top: 1px solid var(--border-color);
        }
        
        .pagination-info {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .pagination {
            display: flex;
            gap: 4px;
        }
        
        .pagination .el-button.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* 两列表单布局 */
        .two-column-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .two-column-form {
                grid-template-columns: 1fr;
            }
        }
        
        .form-column {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        /* 表单行 */
        .form-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .form-row label {
            width: 140px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            text-align: right;
            margin-bottom: 0;
        }
        
        .form-row select {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            min-width: 200px;
        }
        
        /* 时间配置 */
        .time-config-section {
            margin: 24px 0;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 6px;
        }
        
        .time-config-section h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }
        
        .execution-options {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .execution-option {
            flex: 1;
        }
        
        .execution-option input[type="radio"] {
            display: none;
        }
        
        .execution-option label {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            background-color: white;
        }
        
        .execution-option input[type="radio"]:checked + label {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
        }
        
        .execution-option label i {
            color: var(--primary-color);
            font-size: 16px;
        }
        
        .execution-option label span {
            font-size: 14px;
            font-weight: 500;
        }
        
        .option-details {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }
        
        .detail-row {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 16px;
            padding: 16px;
            background-color: #f9f9f9;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .detail-row label {
            width: 100px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .detail-row select,
        .detail-row input[type="time"] {
            padding: 6px 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
        }
        
        /* 应用数据源 */
        .data-source-section {
            margin: 24px 0;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 6px;
        }
        
        .data-source-section h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }
        
        .simple-checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px 24px;
            margin-bottom: 12px;
        }
        
        .simple-checkbox {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .simple-checkbox input[type="checkbox"] {
            width: 16px;
            height: 16px;
        }
        
        .simple-checkbox label {
            font-size: 14px;
            color: var(--text-primary);
            cursor: pointer;
        }
        
        .selected-count {
            font-size: 14px;
            color: var(--text-secondary);
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
        }
        
        /* 操作按钮 */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        /* 数据仪表盘样式 */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .dashboard-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        /* 关键指标卡片 */
        .key-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .metric-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .metric-icon {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .metric-content {
            flex: 1;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .metric-label {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* 图表区域 */
        .dashboard-charts {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
        }
        
        @media (max-width: 1200px) {
            .dashboard-charts {
                grid-template-columns: 1fr;
            }
        }
        
        .chart-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            margin-bottom: 24px;
            overflow: hidden;
        }
        
        .chart-card.large {
            margin-bottom: 0;
        }
        
        .chart-header {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chart-header h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        
        .chart-body {
            padding: 24px;
            min-height: 300px;
        }
        
        /* 机器人状态概览 */
        .robot-status-overview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            height: 100%;
        }
        
        @media (max-width: 768px) {
            .robot-status-overview {
                grid-template-columns: 1fr;
            }
        }
        
        /* 饼图示例 */
        .pie-chart-demo {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(
                #52c41a 0% 75%,
                #fa8c16 75% 90%,
                #f5222d 90% 100%
            );
            position: relative;
            margin: 0 auto;
        }
        
        .pie-segment {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .pie-segment span {
            background-color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .chart-legend {
            margin-top: 24px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            margin-right: 8px;
        }
        
        .legend-text {
            font-size: 14px;
            color: var(--text-primary);
        }
        
        /* 状态详情 */
        .status-detail {
            margin-bottom: 24px;
        }
        
        .detail-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 12px;
        }
        
        .detail-list, .recent-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .detail-item, .recent-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .item-name, .robot-name {
            font-size: 14px;
            color: var(--text-primary);
        }
        
        .item-value, .robot-time {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* 异常图表 */
        .line-chart-demo {
            height: 200px;
            position: relative;
            margin-bottom: 30px;
        }
        
        .chart-grid {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .grid-line {
            border-top: 1px dashed #f0f0f0;
        }
        
        .data-line {
            position: absolute;
            bottom: 30px;
            left: 0;
            right: 0;
            height: 150px;
        }
        
        .data-point {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #f5222d;
            border-radius: 50%;
            transform: translate(-50%, 50%);
        }
        
        .data-point:after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: rgba(245, 34, 45, 0.1);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .x-axis {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
        }
        
        .x-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .chart-summary, .feedback-summary {
            display: flex;
            gap: 24px;
            margin-top: 20px;
        }
        
        .summary-item {
            flex: 1;
            text-align: center;
        }
        
        .summary-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        
        .summary-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .summary-value.positive {
            color: #52c41a;
        }
        
        .summary-value.negative {
            color: #f5222d;
        }
        
        /* 词云图 */
        .word-cloud-demo {
            height: 200px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .word {
            padding: 4px 8px;
            border-radius: 4px;
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .word:hover {
            transform: scale(1.1);
            background-color: #f0f0f0;
        }
        
        /* 图表列 */
        .chart-column {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        .chart-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* 指标分析页面样式 */
        .metrics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .metrics-filter {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            align-items: center;
        }
        
        /* 指标网格布局 */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 24px;
        }
        
        @media (max-width: 1200px) {
            .metrics-grid {
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* 指标卡片 */
        .metric-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .metric-card-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .metric-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .metric-title h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        
        .metric-card-body {
            padding: 20px;
            flex: 1;
        }
        
        /* 满意度图表 */
        .satisfaction-chart {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .chart-visual {
            position: relative;
            width: 160px;
            height: 160px;
            margin-bottom: 20px;
        }
        
        .pie-chart {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                #52c41a 0% 60%,
                #1890ff 60% 85%,
                #fa8c16 85% 95%,
                #f5222d 95% 100%
            );
        }
        
        .chart-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background-color: white;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .center-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .center-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* 响应时间图表 */
        .response-time-chart {
            display: flex;
            flex-direction: column;
        }
        
        .trend-chart {
            display: flex;
            height: 200px;
            margin-bottom: 20px;
        }
        
        .chart-y-axis {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 40px;
            padding-right: 10px;
            border-right: 1px solid var(--border-color);
        }
        
        .y-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .chart-content {
            flex: 1;
            position: relative;
            padding-left: 10px;
        }
        
        .chart-grid {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .grid-line {
            border-top: 1px dashed #f0f0f0;
        }
        
        .trend-line {
            position: absolute;
            bottom: 30px;
            left: 0;
            right: 0;
            height: 150px;
        }
        
        .data-point {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #1890ff;
            border-radius: 50%;
            transform: translate(-50%, 50%);
        }
        
        .data-point:after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: rgba(24, 144, 255, 0.1);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .chart-x-axis {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
        }
        
        .x-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .trend-summary {
            display: flex;
            justify-content: space-around;
            padding: 16px;
            background-color: #f9f9f9;
            border-radius: 6px;
        }
        
        .summary-item {
            text-align: center;
        }
        
        .summary-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        
        .summary-value {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .summary-value.negative {
            color: #52c41a;
        }
        
        /* 指标统计 */
        .metric-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        
        .stat-value {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }
        
        /* 指标卡片底部 */
        .metric-card-footer {
            padding: 16px 20px;
            background-color: #f9f9f9;
            border-top: 1px solid var(--border-color);
        }
        
        .metric-description {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            line-height: 1.4;
        }
        
        .metric-tags {
            display: flex;
            gap: 6px;
        }
        
        /* 添加指标卡片 */
        .add-metric-card {
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed var(--border-color);
            background-color: #fafafa;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .add-metric-card:hover {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
        }
        
        .add-metric-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 40px 20px;
        }
        
        .add-metric-content i {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 16px;
        }
        
        .add-metric-text {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .add-metric-desc {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* 指标占位符 */
        .metric-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 200px;
            color: #999;
        }
        
        .metric-placeholder i {
            font-size: 48px;
            margin-bottom: 16px;
            color: #d9d9d9;
        }
        
        .metric-placeholder p {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* 图表图例 */
        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }
        
        .legend-text {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* 水平布局的表单行 */
        .form-row.horizontal {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .form-row.horizontal label {
            width: 140px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            text-align: right;
            margin-bottom: 0;
        }
        
        .form-row.horizontal select {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            min-width: 200px;
        }
        
        /* 时间配置部分 - 合并到一行 */
        .detail-row.combined {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 16px;
            padding: 16px;
            background-color: #f9f9f9;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-item label {
            font-size: 14px;
            color: var(--text-secondary);
            white-space: nowrap;
        }
        
        .detail-item select,
        .detail-item input[type="time"] {
            padding: 6px 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            width: 160px;
        }

        /* AI分析页面样式 */
        .ai-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .ai-actions {
            display: flex;
            gap: 12px;
        }
        
        /* 通用部分样式 */
        .ai-section {
            margin-bottom: 32px;
            padding: 24px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }
        
        .section-header {
            margin-bottom: 24px;
        }
        
        .section-header h3 {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-header h3 i {
            color: var(--primary-color);
        }
        
        .section-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* 报告生成区域 */
        .report-generation {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }
        
        @media (max-width: 1200px) {
            .report-generation {
                grid-template-columns: 1fr;
            }
        }
        
        .generation-form {
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .form-row {
            margin-bottom: 20px;
        }
        
        .form-row label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .form-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        
        .report-preview {
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .preview-header h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        
        .preview-status {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .preview-status.ready {
            background-color: #f6ffed;
            color: #52c41a;
            border: 1px solid #b7eb8f;
        }
        
        .preview-status.processing {
            background-color: #fff7e6;
            color: #fa8c16;
            border: 1px solid #ffd591;
        }
        
        .preview-status.empty {
            background-color: #f0f0f0;
            color: #595959;
            border: 1px solid #d9d9d9;
        }
        
        .preview-card {
            padding: 16px;
            background-color: #fafafa;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .preview-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }
        
        .preview-meta {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .preview-meta i {
            margin-right: 4px;
        }
        
        .preview-summary h5 {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .preview-summary ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .preview-summary li {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 6px;
            line-height: 1.4;
        }
        
        .preview-summary li i {
            color: var(--primary-color);
            margin-right: 8px;
            font-size: 12px;
        }
        
        .preview-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }
        
        .no-preview {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 200px;
            color: #999;
        }
        
        .no-preview i {
            font-size: 48px;
            margin-bottom: 16px;
            color: #d9d9d9;
        }
        
        .no-preview p {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* 历史报告列表 */
        .historical-reports {
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
        }
        
        .reports-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .reports-header h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        
        .report-title-cell {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .report-title-cell i {
            font-size: 16px;
        }
        
        /* 问题智能分类展示 */
        .problem-classification {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        .classification-overview {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        
        @media (max-width: 992px) {
            .classification-overview {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 576px) {
            .classification-overview {
                grid-template-columns: 1fr;
            }
        }
        
        .overview-card {
            display: flex;
            align-items: center;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            gap: 16px;
        }
        
        .overview-icon {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .overview-content {
            flex: 1;
        }
        
        .overview-value {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .overview-label {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        /* 分类详情 */
        .classification-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }
        
        @media (max-width: 1200px) {
            .classification-details {
                grid-template-columns: 1fr;
            }
        }
        
        .classification-chart {
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-header h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        
        .distribution-chart {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .pie-chart-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin-bottom: 20px;
        }
        
        .pie-chart {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }
        
        .chart-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background-color: white;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .center-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .center-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .chart-legend {
            width: 100%;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .legend-item:last-child {
            border-bottom: none;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            margin-right: 8px;
        }
        
        .legend-text {
            flex: 1;
            font-size: 13px;
            color: var(--text-primary);
        }
        
        .legend-percentage {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        .classification-list {
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .list-header h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        
        .category-cell {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .category-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }
        
        .category-name {
            font-size: 14px;
            color: var(--text-primary);
        }
        
        .trend-cell {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .trend-cell.up {
            color: #52c41a;
        }
        
        .trend-cell.down {
            color: #f5222d;
        }
        
        .trend-cell.stable {
            color: #595959;
        }
        
        .suggestion-cell {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        
        /* 热门问题示例 */
        .hot-problems {
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .hot-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .hot-header h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        
        .hot-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .problem-examples {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }
        
        @media (max-width: 768px) {
            .problem-examples {
                grid-template-columns: 1fr;
            }
        }
        
        .example-card {
            padding: 16px;
            background-color: #fafafa;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .example-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .example-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .problem-category {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            color: white;
            font-weight: 500;
        }
        
        .problem-frequency {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .problem-frequency i {
            margin-right: 4px;
        }
        
        .example-body {
            margin-bottom: 12px;
        }
        
        .problem-text {
            font-size: 14px;
            color: var(--text-primary);
            line-height: 1.4;
            margin-bottom: 8px;
        }
        
        .problem-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .problem-meta i {
            margin-right: 4px;
        }
        
        .example-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* 响应式调整 */
        @media (max-width: 1200px) {
            .two-column-form {
                grid-template-columns: 1fr;
            }
            
            .detail-row.combined {
                flex-direction: column;
                align-items: stretch;
            }
            
            .detail-item {
                flex-direction: column;
                align-items: flex-start;
                width: 100%;
            }
            
            .detail-item select,
            .detail-item input[type="time"] {
                width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .form-row.horizontal {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .form-row.horizontal label {
                width: 100%;
                text-align: left;
                margin-bottom: 6px;
            }
            
            .form-row.horizontal select {
                width: 100%;
                min-width: auto;
            }
            
            .execution-options {
                flex-direction: column;
            }
        }
        
        /* 响应式 */
        @media (max-width: 992px) {
            .sidebar {
                width: 80px;
            }
            
            .logo-text, .nav-text, .arrow-icon {
                display: none;
            }
            
            .nav-item {
                justify-content: center;
                padding: 16px 0;
            }
            
            .nav-item i {
                margin-right: 0;
                font-size: 20px;
            }
            
            .sub-nav-menu {
                display: none !important;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .form-row {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .form-row label {
                width: 100%;
                margin-bottom: 8px;
            }
        }
        
        @media (max-width: 576px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .btn-group {
                flex-direction: column;
            }
        }
        
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        @media (max-width: 1200px) {
            .checkbox-grid {
                grid-template-columns: 1fr;
            }
            
            .records-summary {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .records-summary {
                grid-template-columns: 1fr;
            }
            
            .table-footer {
                flex-direction: column;
                gap: 12px;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div id="app" class="dashboard-container">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                    <span class="logo-text">机器人后台管理平台</span>
                </div>
            </div>
            
            <div class="nav-menu">
		<a href="index.html" class="nav-item">
    			<i class="fas fa-home"></i>
    			<span class="nav-text">首页</span>
		</a>
                <!-- 任务管理 -->
                <div class="nav-item-wrapper">
                    <div 
                        class="nav-item" 
                        :class="{ expanded: expandedMenu === 'taskManagement' }"
                        @click="toggleMenu('taskManagement')"
                    >
                        <i class="fas fa-tasks"></i>
                        <span class="nav-text">任务管理</span>
                        <i 
                            class="fas fa-chevron-down arrow-icon" 
                            :class="{ 'rotated': expandedMenu === 'taskManagement' }"
                        ></i>
                    </div>
                    
                    <div class="sub-nav-menu" v-show="expandedMenu === 'taskManagement'">
                        <a href="tasks.html#templates" class="nav-item sub-item">
                            <i class="fas fa-clipboard-list"></i>
                            <span class="nav-text">模板管理</span>
                        </a>
                        <a href="tasks.html#tasks" class="nav-item sub-item">
                            <i class="fas fa-list-ul"></i>
                            <span class="nav-text">任务列表</span>
                        </a>
                        <a href="tasks.html#scheduling" class="nav-item sub-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span class="nav-text">任务调度</span>
                        </a>
                        <a href="tasks.html#monitoring" class="nav-item sub-item">
                            <i class="fas fa-eye"></i>
                            <span class="nav-text">任务监控</span>
                        </a>
                    </div>
                </div>

                <!-- 机器人管理 -->
                <a href="robots.html" class="nav-item">
                    <i class="fas fa-robot"></i>
                    <span class="nav-text">机器人管理</span>
                </a>
                <!-- 交互应用管理 -->
                <div class="nav-item-wrapper">
                <div
                        class="nav-item"
                        :class="{ 'active-parent': expandedMenu === 'appManagement', 'expanded': expandedMenu === 'appManagement' }"
                        @click="toggleMenu('appManagement')"
                >
                    <i class="fas fa-cogs"></i>
                    <span class="nav-text">交互应用管理</span>
                    <i
                            class="fas fa-chevron-down arrow-icon"
                            :class="{ 'rotated': expandedMenu === 'appManagement' }"
                    ></i>
                </div>

                <div class="sub-nav-menu" v-show="expandedMenu === 'appManagement'">
                    <a href="app.html#appLibrary" class="nav-item sub-item"
                       :class="{ active: activeNav === 'appLibrary' }" @click="setActiveNav('appLibrary')">
                        <i class="fas fa-th"></i>
                        <span class="nav-text">应用库管理</span>
                    </a>
                    <a href="app.html#appConfig" class="nav-item sub-item"
                       :class="{ active: activeNav === 'appConfig' }" @click="setActiveNav('appConfig')">
                        <i class="fas fa-sliders-h"></i>
                        <span class="nav-text">应用配置管理</span>
                    </a>
                    <a href="app.html#appUpdate" class="nav-item sub-item"
                       :class="{ active: activeNav === 'appUpdate' }" @click="setActiveNav('appUpdate')">
                        <i class="fas fa-sync-alt"></i>
                        <span class="nav-text">应用更新管理</span>
                    </a>
                </div>
            </div>


                <div class="nav-item-wrapper">
                <!-- 模式管理折叠菜单 -->
                <a 
                   href="mode.html#status" 
                   class="nav-item"
                   :class="{ expanded: expandedMenu === 'modeManagement' }"
                   @click.stop="toggleMenu('modeManagement')"
                >
                   <i class="fas fa-cogs"></i>
                   <span class="nav-text">模式管理</span>
                   <i 
                     class="fas fa-chevron-down arrow-icon" 
                     :class="{ 'rotated': expandedMenu === 'modeManagement' }"
                   ></i>
                 </a>

   <div class="sub-nav-menu" v-show="expandedMenu === 'modeManagement'">
                   <a href="mode.html#status" class="nav-item sub-item">
                     <i class="fas fa-heartbeat"></i>
                     <span class="nav-text">状态监控</span>
                   </a>
                   <a href="mode.html#switch" class="nav-item sub-item">
                     <i class="fas fa-exchange-alt"></i>
                     <span class="nav-text">模式切换</span>
                   </a>
                   <a href="mode.html#history" class="nav-item sub-item">
                     <i class="fas fa-history"></i>
                     <span class="nav-text">历史记录</span>
                   </a>
                   <a href="mode.html#quick" class="nav-item sub-item">
                     <i class="fas fa-bolt"></i>
                     <span class="nav-text">快速操作</span>
                   </a>
               </div>
           </div>

                
                <!-- 数据管理与分析（当前页面高亮） -->
                <div class="nav-item-wrapper">
                    <div 
                        class="nav-item active" 
                        :class="{ expanded: expandedMenu === 'dataAnalysis' }"
                        @click="toggleMenu('dataAnalysis')"
                    >
                        <i class="fas fa-chart-line"></i>
                        <span class="nav-text">数据管理与分析</span>
                        <i 
                            class="fas fa-chevron-down arrow-icon" 
                            :class="{ 'rotated': expandedMenu === 'dataAnalysis' }"
                        ></i>
                    </div>
                    
                    <!-- 修复：确保子按钮高亮逻辑正确 -->
                    <div class="sub-nav-menu" v-show="expandedMenu === 'dataAnalysis'">
                        <a 
                            href="data.html#tools" 
                            class="nav-item sub-item" 
                            :class="{ active: currentTab === 'tools' }"
                            @click="handleSubMenuClick('tools')"
                        >
                            <i class="fas fa-database"></i>
                            <span class="nav-text">数据管理工具</span>
                        </a>
                        <a 
                            href="data.html#dashboard" 
                            class="nav-item sub-item" 
                            :class="{ active: currentTab === 'dashboard' }"
                            @click="handleSubMenuClick('dashboard')"
                        >
                            <i class="fas fa-tachometer-alt"></i>
                            <span class="nav-text">数据仪表盘</span>
                        </a>
                        <a 
                            href="data.html#metrics" 
                            class="nav-item sub-item" 
                            :class="{ active: currentTab === 'metrics' }"
                            @click="handleSubMenuClick('metrics')"
                        >
                            <i class="fas fa-chart-bar"></i>
                            <span class="nav-text">指标分析</span>
                        </a>
                        <a 
                            href="data.html#ai" 
                            class="nav-item sub-item" 
                            :class="{ active: currentTab === 'ai' }"
                            @click="handleSubMenuClick('ai')"
                        >
                            <i class="fas fa-brain"></i>
                            <span class="nav-text">AI分析</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- 主内容区 -->
        <div class="main-content">
            <div class="header">
                <div class="header-left">
                     <span class="header-title">{{ pageTitle }}</span>
                </div>
                <div class="header-actions">
                    <el-button type="text" @click="refreshData">
                        <i class="fas fa-sync-alt"></i> 刷新数据
                    </el-button>
                    <div class="user-info">
                        <div class="user-avatar">A</div>
                        <span>管理员</span>
                    </div>
                </div>
            </div>

            <!-- 数据管理工具页面内容 -->
            <div class="content-wrapper">
                <!-- 数据管理工具页面 -->
                <div v-if="currentTab === 'tools'" class="page-content">
                    <div class="page-title">数据清洗规则配置</div>
                    <div class="page-desc">
                        配置数据清洗规则，对机器人采集的交互日志、状态与用户反馈数据进行标准化处理，为后续分析提供高质量数据。
                    </div>

                    <div class="card">
                    <div class="card-body">
                        <div class="form-section">
                            <h3>数据清洗规则配置</h3>
                            
                            <!-- 两列布局的表单（改为水平布局） -->
                            <div class="two-column-form">
                                <div class="form-column">
                                    <div class="form-row horizontal">
                                        <label>字段完整性校验</label>
                                        <select v-model="cleaningRules.fieldValidation">
                                            <option value="mark">缺失字段标记异常</option>
                                            <option value="discard">缺失字段自动丢弃</option>
                                            <option value="fill">缺失字段填充默认值</option>
                                        </select>
                                    </div>
                                    <div class="form-row horizontal">
                                        <label>时间格式统一</label>
                                        <select v-model="cleaningRules.timeFormat">
                                            <option value="iso8601">ISO 8601</option>
                                            <option value="timestamp_ms">时间戳（毫秒）</option>
                                            <option value="timestamp_s">时间戳（秒）</option>
                                        </select>
                                    </div>
                                    <div class="form-row horizontal">
                                        <label>状态码映射规则</label>
                                        <select v-model="cleaningRules.statusMapping">
                                            <option value="enum">映射为平台统一枚举</option>
                                            <option value="original">保留原始值</option>
                                            <option value="custom">自定义映射表</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-column">
                                    <div class="form-row horizontal">
                                        <label>异常值过滤策略</label>
                                        <select v-model="cleaningRules.outlierFilter">
                                            <option value="mark">标记异常</option>
                                            <option value="filter">直接过滤</option>
                                            <option value="correct">使用统计方法修正</option>
                                        </select>
                                    </div>
                                    <div class="form-row horizontal">
                                        <label>文本数据清洗</label>
                                        <select v-model="cleaningRules.textCleaning">
                                            <option value="html">去除HTML标签</option>
                                            <option value="special">去除特殊字符</option>
                                            <option value="original">保留原始文本</option>
                                        </select>
                                    </div>
                                    <div class="form-row horizontal">
                                        <label>重复数据处理</label>
                                        <select v-model="cleaningRules.duplicateHandling">
                                            <option value="keep_first">保留第一条</option>
                                            <option value="keep_last">保留最后一条</option>
                                            <option value="remove_all">删除所有重复</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 时间配置部分（修改为合并到一行） -->
                            <div class="time-config-section">
                                <h4>执行方式</h4>
                                <div class="execution-options">
                                    <div class="execution-option">
                                        <input 
                                            type="radio" 
                                            id="scheduleAuto" 
                                            name="executionType" 
                                            value="schedule" 
                                            v-model="cleaningRules.executionType"
                                        >
                                        <label for="scheduleAuto">
                                            <i class="fas fa-clock"></i>
                                            <span>定时清洗</span>
                                        </label>
                                        
                                        <div class="option-details" v-if="cleaningRules.executionType === 'schedule'">
                                            <div class="detail-row combined">
                                                <div class="detail-item">
                                                    <label>执行频率</label>
                                                    <select v-model="cleaningRules.scheduleFrequency">
                                                        <option value="hourly">每小时</option>
                                                        <option value="daily">每天</option>
                                                        <option value="weekly">每周</option>
                                                        <option value="monthly">每月</option>
                                                    </select>
                                                </div>
                                                
                                                <!-- 每天的执行时间 -->
                                                <div class="detail-item" v-if="cleaningRules.scheduleFrequency === 'daily'">
                                                    <label>执行时间</label>
                                                    <input 
                                                        type="time" 
                                                        v-model="cleaningRules.scheduleTime"
                                                    >
                                                </div>
                                                
                                                <!-- 每周的执行星期 -->
                                                <div class="detail-item" v-if="cleaningRules.scheduleFrequency === 'weekly'">
                                                    <label>执行星期</label>
                                                    <select v-model="cleaningRules.scheduleDay">
                                                        <option value="1">星期一</option>
                                                        <option value="2">星期二</option>
                                                        <option value="3">星期三</option>
                                                        <option value="4">星期四</option>
                                                        <option value="5">星期五</option>
                                                        <option value="6">星期六</option>
                                                        <option value="0">星期日</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="execution-option">
                                        <input 
                                            type="radio" 
                                            id="manualTrigger" 
                                            name="executionType" 
                                            value="manual" 
                                            v-model="cleaningRules.executionType"
                                        >
                                        <label for="manualTrigger">
                                            <i class="fas fa-play-circle"></i>
                                            <span>手动触发</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 应用数据源部分（简化） -->
                            <div class="data-source-section">
                                <h4>应用数据源</h4>
                                <div class="simple-checkbox-group">
                                    <div class="simple-checkbox">
                                        <input type="checkbox" id="interaction" v-model="dataSources.interactionLogs" checked>
                                        <label for="interaction">交互日志</label>
                                    </div>
                                    <div class="simple-checkbox">
                                        <input type="checkbox" id="status" v-model="dataSources.robotStatus" checked>
                                        <label for="status">机器人状态</label>
                                    </div>
                                    <div class="simple-checkbox">
                                        <input type="checkbox" id="feedback" v-model="dataSources.userFeedback" checked>
                                        <label for="feedback">用户反馈</label>
                                    </div>
                                    <div class="simple-checkbox">
                                        <input type="checkbox" id="task" v-model="dataSources.taskExecution">
                                        <label for="task">任务执行记录</label>
                                    </div>
                                    <div class="simple-checkbox">
                                        <input type="checkbox" id="performance" v-model="dataSources.performance">
                                        <label for="performance">性能指标</label>
                                    </div>
                                    <div class="simple-checkbox">
                                        <input type="checkbox" id="error" v-model="dataSources.errorLogs">
                                        <label for="error">错误日志</label>
                                    </div>
                                </div>
                                <div class="selected-count">
                                    已选择 {{ selectedDataSourcesCount }} 个数据源
                                </div>
                            </div>
                            
                            <!-- 操作按钮 -->
                            <div class="action-buttons">
                                <el-button type="primary" @click="saveCleaningRules">
                                    <i class="fas fa-save"></i>
                                    保存配置
                                </el-button>
                                <el-button @click="testCleaningRules">
                                    <i class="fas fa-vial"></i>
                                    测试规则
                                </el-button>
                                <el-button 
                                    type="success" 
                                    @click="executeCleaningNow"
                                    v-if="cleaningRules.executionType === 'manual'"
                                >
                                    <i class="fas fa-play"></i>
                                    立即执行
                                </el-button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div class="form-section">
                            <div class="section-header">
                                <h3>最近处理记录</h3>
                                <div class="section-actions">
                                    <el-button size="small" @click="refreshRecords">
                                        <i class="fas fa-sync-alt"></i>
                                        刷新
                                    </el-button>
                                    <el-button size="small" type="primary" @click="showAllRecords">
                                        <i class="fas fa-list"></i>
                                        查看全部
                                    </el-button>
                                </div>
                            </div>
                            
                            <div class="records-summary">
                                <div class="summary-item">
                                    <div class="summary-icon" style="background: #e6f7ff; color: #1890ff;">
                                        <i class="fas fa-database"></i>
                                    </div>
                                    <div class="summary-info">
                                        <div class="summary-value">5,425</div>
                                        <div class="summary-label">今日处理总数</div>
                                    </div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-icon" style="background: #f6ffed; color: #52c41a;">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                    <div class="summary-info">
                                        <div class="summary-value">5,321</div>
                                        <div class="summary-label">正常处理数</div>
                                    </div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-icon" style="background: #fff7e6; color: #fa8c14;">
                                        <i class="fas fa-exclamation-circle"></i>
                                    </div>
                                    <div class="summary-info">
                                        <div class="summary-value">104</div>
                                        <div class="summary-label">异常数据数</div>
                                    </div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-icon" style="background: #f0f0f0; color: #595959;">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="summary-info">
                                        <div class="summary-value">1.8%</div>
                                        <div class="summary-label">异常率</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="compact-table-container">
                                <table class="compact-table">
                                    <thead>
                                        <tr>
                                            <th width="160">执行时间</th>
                                            <th width="100">任务类型</th>
                                            <th width="120">数据来源</th>
                                            <th width="100">处理条数</th>
                                            <th width="100">异常条数</th>
                                            <th width="100">执行状态</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="time-cell">
                                                    <div class="time-date">2026-01-25</div>
                                                    <div class="time-clock">14:30:22</div>
                                                </div>
                                            </td>
                                            <td>
                                                <el-tag size="small" type="info">定时清洗</el-tag>
                                            </td>
                                            <td>
                                                <div class="data-source-cell">
                                                    <i class="fas fa-microchip"></i>
                                                    机器人状态
                                                </div>
                                            </td>
                                            <td>
                                                <div class="count-cell">1,240</div>
                                            </td>
                                            <td>
                                                <div class="count-cell warning">12</div>
                                            </td>
                                            <td>
                                                <el-tag size="small" type="success" class="status-tag">
                                                    <i class="fas fa-check"></i>
                                                    完成
                                                </el-tag>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="time-cell">
                                                    <div class="time-date">2026-01-25</div>
                                                    <div class="time-clock">13:10:45</div>
                                                </div>
                                            </td>
                                            <td>
                                                <el-tag size="small">手动触发</el-tag>
                                            </td>
                                            <td>
                                                <div class="data-source-cell">
                                                    <i class="fas fa-comments"></i>
                                                    交互日志
                                                </div>
                                            </td>
                                            <td>
                                                <div class="count-cell">3,560</div>
                                            </td>
                                            <td>
                                                <div class="count-cell warning">87</div>
                                            </td>
                                            <td>
                                                <el-tag size="small" type="warning" class="status-tag">
                                                    <i class="fas fa-exclamation"></i>
                                                    存在异常
                                                </el-tag>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="time-cell">
                                                    <div class="time-date">2026-01-25</div>
                                                    <div class="time-clock">10:15:33</div>
                                                </div>
                                            </td>
                                            <td>
                                                <el-tag size="small" type="info">定时清洗</el-tag>
                                            </td>
                                            <td>
                                                <div class="data-source-cell">
                                                    <i class="fas fa-star"></i>
                                                    用户反馈
                                                </div>
                                            </td>
                                            <td>
                                                <div class="count-cell">625</div>
                                            </td>
                                            <td>
                                                <div class="count-cell warning">5</div>
                                            </td>
                                            <td>
                                                <el-tag size="small" type="success" class="status-tag">
                                                    <i class="fas fa-check"></i>
                                                    完成
                                                </el-tag>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <div class="table-footer">
                                    <div class="pagination-info">
                                        显示 3 条记录，共 128 条
                                    </div>
                                    <div class="pagination">
                                        <el-button size="small" disabled>
                                            <i class="fas fa-chevron-left"></i>
                                        </el-button>
                                        <el-button size="small" class="active">1</el-button>
                                        <el-button size="small">2</el-button>
                                        <el-button size="small">3</el-button>
                                        <el-button size="small">
                                            <i class="fas fa-chevron-right"></i>
                                        </el-button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>

                <!-- 其他子页面 -->
                <!-- 数据仪表盘页面 -->
                <div v-if="currentTab === 'dashboard'" class="data-dashboard">
                    <!-- 页面标题和筛选 -->
                    <div class="dashboard-header">
                        <div class="dashboard-controls">
                            <div class="time-range">
                                <el-select v-model="dashboardTimeRange" size="small" style="width: 120px;">
                                    <el-option label="今日" value="today"></el-option>
                                    <el-option label="本周" value="week"></el-option>
                                    <el-option label="本月" value="month"></el-option>
                                    <el-option label="本年" value="year"></el-option>
                                </el-select>
                            </div>
                            <el-button size="small" @click="refreshDashboard">
                                <i class="fas fa-sync-alt"></i>
                                刷新
                            </el-button>
                        </div>
                    </div>
                
                    <!-- 关键指标卡片 -->
                    <div class="key-metrics">
                        <div class="metric-card">
                            <div class="metric-icon" style="background-color: #e6f7ff;">
                                <i class="fas fa-robot" style="color: #1890ff;"></i>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">{{ robotStats.total }}</div>
                                <div class="metric-label">总机器人数量</div>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon" style="background-color: #f6ffed;">
                                <i class="fas fa-check-circle" style="color: #52c41a;"></i>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">{{ robotStats.online }}</div>
                                <div class="metric-label">在线机器人</div>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon" style="background-color: #fff1f0;">
                                <i class="fas fa-bug" style="color: #f5222d;"></i>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">{{ exceptionStats.today }}</div>
                                <div class="metric-label">今日异常</div>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon" style="background-color: #f9f0ff;">
                                <i class="fas fa-comments" style="color: #722ed1;"></i>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">{{ feedbackStats.today }}</div>
                                <div class="metric-label">今日反馈</div>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon" style="background-color: #fcffe6;">
                                <i class="fas fa-tasks" style="color: #a0d911;"></i>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">{{ taskStats.completed }}</div>
                                <div class="metric-label">完成的任务</div>
                            </div>
                        </div>
                    </div>
                
                    <!-- 主要图表区域 -->
                    <div class="dashboard-charts">
                        <!-- 服务监控大屏（在线机器人情况） -->
                        <div class="chart-card large">
                            <div class="chart-header">
                                <h3>服务监控大屏 - 在线机器人情况</h3>
                                <div class="chart-actions">
                                    <el-button size="small" type="text">
                                        <i class="fas fa-expand"></i>
                                    </el-button>
                                </div>
                            </div>
                            <div class="chart-body">
                                <div class="robot-status-overview">
                                    <div class="robot-status-chart">
                                        <!-- 这里可以放置机器人状态图表，比如饼图或环形图 -->
                                        <div class="chart-placeholder">
                                            <div class="pie-chart-demo">
                                                <div class="pie-segment" style="--percent: 75; --color: #52c41a;" title="在线: 75%">
                                                    <span>在线</span>
                                                </div>
                                                <div class="pie-segment" style="--percent: 15; --color: #fa8c16;" title="忙碌: 15%">
                                                    <span>忙碌</span>
                                                </div>
                                                <div class="pie-segment" style="--percent: 10; --color: #f5222d;" title="离线: 10%">
                                                    <span>离线</span>
                                                </div>
                                            </div>
                                            <div class="chart-legend">
                                                <div class="legend-item">
                                                    <span class="legend-color" style="background-color: #52c41a;"></span>
                                                    <span class="legend-text">在线 ({{ robotStats.online }})</span>
                                                </div>
                                                <div class="legend-item">
                                                    <span class="legend-color" style="background-color: #fa8c16;"></span>
                                                    <span class="legend-text">忙碌 ({{ robotStats.busy }})</span>
                                                </div>
                                                <div class="legend-item">
                                                    <span class="legend-color" style="background-color: #f5222d;"></span>
                                                    <span class="legend-text">离线 ({{ robotStats.offline }})</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="robot-status-details">
                                        <div class="status-detail">
                                            <div class="detail-label">机器人分组</div>
                                            <div class="detail-list">
                                                <div class="detail-item">
                                                    <span class="item-name">示例客服组</span>
                                                    <span class="item-value">{{ robotStats.byGroup.customerService }}/{{ robotStats.totalByGroup.customerService }}</span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="item-name">示例运维组</span>
                                                    <span class="item-value">{{ robotStats.byGroup.operations }}/{{ robotStats.totalByGroup.operations }}</span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="item-name">示例质检组</span>
                                                    <span class="item-value">{{ robotStats.byGroup.quality }}/{{ robotStats.totalByGroup.quality }}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-detail">
                                            <div class="detail-label">最近上线</div>
                                            <div class="recent-list">
                                                <div class="recent-item" v-for="robot in recentOnlineRobots" :key="robot.id">
                                                    <span class="robot-name">{{ robot.name }}</span>
                                                    <span class="robot-time">{{ robot.time }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                
                        <!-- 右侧两列小图表 -->
                        <div class="chart-column">
                            <!-- 异常情况数量 -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3>异常情况趋势</h3>
                                </div>
                                <div class="chart-body">
                                    <div class="exception-chart">
                                        <!-- 这里可以放置折线图或柱状图 -->
                                        <div class="chart-placeholder">
                                            <div class="line-chart-demo">
                                                <div class="chart-grid">
                                                    <div class="grid-line" v-for="i in 5" :key="i"></div>
                                                </div>
                                                <div class="data-line">
                                                    <div class="data-point" v-for="(point, index) in exceptionStats.trend" 
                                                         :key="index" 
                                                         :style="{left: `${index * 20}%`, bottom: `${point.value * 10}px`}"
                                                         :title="`${point.day}: ${point.count}个异常`">
                                                    </div>
                                                </div>
                                                <div class="x-axis">
                                                    <div class="x-label" v-for="point in exceptionStats.trend" :key="point.day">
                                                        {{ point.day }}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="chart-summary">
                                                <div class="summary-item">
                                                    <div class="summary-label">本周异常</div>
                                                    <div class="summary-value">{{ exceptionStats.week }}</div>
                                                </div>
                                                <div class="summary-item">
                                                    <div class="summary-label">环比</div>
                                                    <div class="summary-value" :class="exceptionStats.trendChange >= 0 ? 'negative' : 'positive'">
                                                        {{ exceptionStats.trendChange > 0 ? '+' : '' }}{{ exceptionStats.trendChange }}%
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                
                            <!-- 用户反馈视图（词云图） -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3>用户反馈高频词</h3>
                                    <div class="chart-actions">
                                        <el-select v-model="feedbackType" size="small" style="width: 100px;">
                                            <el-option label="全部" value="all"></el-option>
                                            <el-option label="好评" value="positive"></el-option>
                                            <el-option label="差评" value="negative"></el-option>
                                        </el-select>
                                    </div>
                                </div>
                                <div class="chart-body">
                                    <div class="word-cloud">
                                        <!-- 这里可以放置词云图 -->
                                        <div class="word-cloud-demo">
                                            <span class="word" v-for="word in wordCloud" :key="word.text" 
                                                  :style="{fontSize: `${word.size}px`, color: word.color}">
                                                {{ word.text }}
                                            </span>
                                        </div>
                                        <div class="feedback-summary">
                                            <div class="summary-item">
                                                <div class="summary-label">满意度</div>
                                                <div class="summary-value">{{ feedbackStats.satisfaction }}%</div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">反馈总数</div>
                                                <div class="summary-value">{{ feedbackStats.total }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 指标分析页面 -->
                <div v-if="currentTab === 'metrics'" class="data-metrics">
                    <!-- 页面标题和操作 -->
                    <div class="metrics-header">
                        <div class="metrics-actions">
                            <el-button type="primary" @click="showCreateMetricDialog">
                                <i class="fas fa-plus"></i>
                                创建新指标
                            </el-button>
                        </div>
                    </div>
                
                    <!-- 指标筛选和搜索 -->
                    <div class="metrics-filter">
                        <el-input
                            v-model="metricSearch"
                            placeholder="搜索指标名称"
                            clearable
                            style="width: 300px;"
                        >
                            <template #prefix>
                                <i class="fas fa-search"></i>
                            </template>
                        </el-input>
                        
                        <el-select v-model="metricCategory" placeholder="选择指标分类" clearable style="width: 200px;">
                            <el-option label="用户满意度" value="satisfaction"></el-option>
                            <el-option label="响应时间" value="response"></el-option>
                            <el-option label="任务完成率" value="completion"></el-option>
                            <el-option label="异常率" value="exception"></el-option>
                        </el-select>
                    </div>
                
                    <!-- 指标卡片展示区域 -->
                    <div class="metrics-grid">
                        <!-- 用户满意度分布指标卡片 -->
                        <div class="metric-card">
                            <div class="metric-card-header">
                                <div class="metric-title">
                                    <h3>用户满意度分布</h3>
                                    <el-tag size="small" type="success">已启用</el-tag>
                                </div>
                                <div class="metric-actions">
                                    <el-dropdown @command="handleMetricCommand('satisfaction', $event)">
                                        <el-button size="small" type="text">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </el-button>
                                        <template #dropdown>
                                            <el-dropdown-menu>
                                                <el-dropdown-item command="edit">编辑配置</el-dropdown-item>
                                                <el-dropdown-item command="disable">停用指标</el-dropdown-item>
                                                <el-dropdown-item command="delete">删除指标</el-dropdown-item>
                                                <el-dropdown-item command="export">导出数据</el-dropdown-item>
                                            </el-dropdown-menu>
                                        </template>
                                    </el-dropdown>
                                </div>
                            </div>
                            
                            <div class="metric-card-body">
                                <div class="metric-chart">
                                    <!-- 满意度分布饼图 -->
                                    <div class="satisfaction-chart">
                                        <div class="chart-visual">
                                            <div class="pie-chart">
                                                <div class="pie-segment" style="--percent: 60; --color: #52c41a;" title="非常满意: 60%"></div>
                                                <div class="pie-segment" style="--percent: 25; --color: #1890ff;" title="满意: 25%"></div>
                                                <div class="pie-segment" style="--percent: 10; --color: #fa8c16;" title="一般: 10%"></div>
                                                <div class="pie-segment" style="--percent: 5; --color: #f5222d;" title="不满意: 5%"></div>
                                            </div>
                                            <div class="chart-center">
                                                <div class="center-value">4.3</div>
                                                <div class="center-label">平均分</div>
                                            </div>
                                        </div>
                                        <div class="chart-legend">
                                            <div class="legend-item">
                                                <span class="legend-color" style="background-color: #52c41a;"></span>
                                                <span class="legend-text">非常满意 (60%)</span>
                                            </div>
                                            <div class="legend-item">
                                                <span class="legend-color" style="background-color: #1890ff;"></span>
                                                <span class="legend-text">满意 (25%)</span>
                                            </div>
                                            <div class="legend-item">
                                                <span class="legend-color" style="background-color: #fa8c16;"></span>
                                                <span class="legend-text">一般 (10%)</span>
                                            </div>
                                            <div class="legend-item">
                                                <span class="legend-color" style="background-color: #f5222d;"></span>
                                                <span class="legend-text">不满意 (5%)</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="metric-stats">
                                    <div class="stat-item">
                                        <div class="stat-label">样本数量</div>
                                        <div class="stat-value">1,245</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">更新频率</div>
                                        <div class="stat-value">每天</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">最近更新</div>
                                        <div class="stat-value">今天 08:30</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="metric-card-footer">
                                <div class="metric-description">
                                    统计用户对机器人服务的满意度评分分布情况
                                </div>
                                <div class="metric-tags">
                                    <el-tag size="small">满意度</el-tag>
                                    <el-tag size="small">用户反馈</el-tag>
                                </div>
                            </div>
                        </div>
                
                        <!-- 平均响应时间指标卡片 -->
                        <div class="metric-card">
                            <div class="metric-card-header">
                                <div class="metric-title">
                                    <h3>平均响应时间</h3>
                                    <el-tag size="small" type="success">已启用</el-tag>
                                </div>
                                <div class="metric-actions">
                                    <el-dropdown @command="handleMetricCommand('response', $event)">
                                        <el-button size="small" type="text">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </el-button>
                                        <template #dropdown>
                                            <el-dropdown-menu>
                                                <el-dropdown-item command="edit">编辑配置</el-dropdown-item>
                                                <el-dropdown-item command="disable">停用指标</el-dropdown-item>
                                                <el-dropdown-item command="delete">删除指标</el-dropdown-item>
                                                <el-dropdown-item command="export">导出数据</el-dropdown-item>
                                            </el-dropdown-menu>
                                        </template>
                                    </el-dropdown>
                                </div>
                            </div>
                            
                            <div class="metric-card-body">
                                <div class="metric-chart">
                                    <!-- 响应时间趋势图 -->
                                    <div class="response-time-chart">
                                        <div class="trend-chart">
                                            <div class="chart-y-axis">
                                                <div class="y-label">3.5s</div>
                                                <div class="y-label">3.0s</div>
                                                <div class="y-label">2.5s</div>
                                                <div class="y-label">2.0s</div>
                                                <div class="y-label">1.5s</div>
                                            </div>
                                            <div class="chart-content">
                                                <div class="chart-grid">
                                                    <div class="grid-line" v-for="i in 5" :key="i"></div>
                                                </div>
                                                <div class="trend-line">
                                                    <div class="data-point" 
                                                         v-for="(point, index) in responseTimeData" 
                                                         :key="index"
                                                         :style="{left: `${index * 20}%`, bottom: `${(point.value - 1.5) * 40}px`}"
                                                         :title="`${point.day}: ${point.value}s`">
                                                    </div>
                                                </div>
                                                <div class="chart-x-axis">
                                                    <div class="x-label" v-for="point in responseTimeData" :key="point.day">
                                                        {{ point.day }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="trend-summary">
                                            <div class="summary-item">
                                                <div class="summary-label">当前平均</div>
                                                <div class="summary-value">2.3s</div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">环比变化</div>
                                                <div class="summary-value negative">-12%</div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">目标值</div>
                                                <div class="summary-value">2.5s</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="metric-stats">
                                    <div class="stat-item">
                                        <div class="stat-label">监控对象</div>
                                        <div class="stat-value">所有机器人</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">计算周期</div>
                                        <div class="stat-value">实时计算</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">阈值告警</div>
                                        <div class="stat-value">
                                            <el-tag size="small" type="success">已开启</el-tag>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="metric-card-footer">
                                <div class="metric-description">
                                    监控机器人从接收请求到给出响应的平均时间
                                </div>
                                <div class="metric-tags">
                                    <el-tag size="small">性能指标</el-tag>
                                    <el-tag size="small">实时监控</el-tag>
                                </div>
                            </div>
                        </div>
                
                        <!-- 更多指标示例卡片 -->
                        <div class="metric-card">
                            <div class="metric-card-header">
                                <div class="metric-title">
                                    <h3>任务完成率</h3>
                                    <el-tag size="small" type="warning">待配置</el-tag>
                                </div>
                                <div class="metric-actions">
                                    <el-dropdown @command="handleMetricCommand('completion', $event)">
                                        <el-button size="small" type="text">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </el-button>
                                        <template #dropdown>
                                            <el-dropdown-menu>
                                                <el-dropdown-item command="configure">配置指标</el-dropdown-item>
                                                <el-dropdown-item command="delete">删除指标</el-dropdown-item>
                                            </el-dropdown-menu>
                                        </template>
                                    </el-dropdown>
                                </div>
                            </div>
                            
                            <div class="metric-card-body">
                                <div class="metric-placeholder">
                                    <i class="fas fa-cog"></i>
                                    <p>指标尚未配置，请点击配置以设置计算规则</p>
                                </div>
                            </div>
                            
                            <div class="metric-card-footer">
                                <div class="metric-description">
                                    统计机器人任务成功完成的比例
                                </div>
                                <div class="metric-tags">
                                    <el-tag size="small">任务指标</el-tag>
                                    <el-tag size="small">成功率</el-tag>
                                </div>
                            </div>
                        </div>
                
                        <!-- 添加新指标卡片 -->
                        <div class="metric-card add-metric-card" @click="showCreateMetricDialog">
                            <div class="add-metric-content">
                                <i class="fas fa-plus-circle"></i>
                                <div class="add-metric-text">添加新指标</div>
                                <div class="add-metric-desc">创建自定义监控指标</div>
                            </div>
                        </div>
                    </div>
                
                    <!-- 创建/编辑指标对话框 -->
                    <el-dialog
                        v-model="metricDialogVisible"
                        :title="isEditingMetric ? '编辑指标配置' : '创建新指标'"
                        width="800px"
                    >
                        <el-form :model="metricForm" label-width="120px">
                            <el-form-item label="指标名称" required>
                                <el-input v-model="metricForm.name" placeholder="请输入指标名称"></el-input>
                            </el-form-item>
                            
                            <el-form-item label="指标分类" required>
                                <el-select v-model="metricForm.category" placeholder="请选择指标分类">
                                    <el-option label="用户满意度" value="satisfaction"></el-option>
                                    <el-option label="响应时间" value="response"></el-option>
                                    <el-option label="任务完成率" value="completion"></el-option>
                                    <el-option label="异常率" value="exception"></el-option>
                                    <el-option label="使用率" value="usage"></el-option>
                                    <el-option label="其他" value="other"></el-option>
                                </el-select>
                            </el-form-item>
                            
                            <el-form-item label="指标描述">
                                <el-input
                                    v-model="metricForm.description"
                                    type="textarea"
                                    :rows="3"
                                    placeholder="请输入指标描述"
                                ></el-input>
                            </el-form-item>
                            
                            <el-form-item label="计算方式" required>
                                <el-radio-group v-model="metricForm.calculationType">
                                    <el-radio label="count">计数统计</el-radio>
                                    <el-radio label="average">平均值</el-radio>
                                    <el-radio label="percentage">百分比</el-radio>
                                    <el-radio label="sum">求和</el-radio>
                                </el-radio-group>
                            </el-form-item>
                            
                            <el-form-item label="数据来源" required>
                                <el-checkbox-group v-model="metricForm.dataSources">
                                    <el-checkbox label="interaction">交互日志</el-checkbox>
                                    <el-checkbox label="status">机器人状态</el-checkbox>
                                    <el-checkbox label="feedback">用户反馈</el-checkbox>
                                    <el-checkbox label="task">任务记录</el-checkbox>
                                </el-checkbox-group>
                            </el-form-item>
                            
                            <el-form-item label="更新频率" required>
                                <el-select v-model="metricForm.updateFrequency" style="width: 200px;">
                                    <el-option label="实时更新" value="realtime"></el-option>
                                    <el-option label="每小时" value="hourly"></el-option>
                                    <el-option label="每天" value="daily"></el-option>
                                    <el-option label="每周" value="weekly"></el-option>
                                </el-select>
                            </el-form-item>
                            
                            <el-form-item label="图表类型" required>
                                <el-select v-model="metricForm.chartType" style="width: 200px;">
                                    <el-option label="柱状图" value="bar"></el-option>
                                    <el-option label="折线图" value="line"></el-option>
                                    <el-option label="饼图" value="pie"></el-option>
                                    <el-option label="环形图" value="ring"></el-option>
                                </el-select>
                            </el-form-item>
                            
                            <el-form-item label="阈值告警">
                                <el-switch v-model="metricForm.enableAlert"></el-switch>
                                <div v-if="metricForm.enableAlert" style="margin-top: 10px;">
                                    <el-input-number v-model="metricForm.alertThreshold" :min="0" :step="0.1" style="width: 150px;"></el-input-number>
                                    <span style="margin-left: 10px; color: #999;">超过此值触发告警</span>
                                </div>
                            </el-form-item>
                            
                            <el-form-item label="指标标签">
                                <el-tag
                                    v-for="tag in metricForm.tags"
                                    :key="tag"
                                    closable
                                    @close="removeMetricTag(tag)"
                                >
                                    {{ tag }}
                                </el-tag>
                                <el-input
                                    v-if="tagInputVisible"
                                    ref="tagInputRef"
                                    v-model="tagInputValue"
                                    size="small"
                                    @keyup.enter="addMetricTag"
                                    @blur="addMetricTag"
                                ></el-input>
                                <el-button v-else size="small" @click="showTagInput">+ 添加标签</el-button>
                            </el-form-item>
                        </el-form>
                        
                        <template #footer>
                            <span class="dialog-footer">
                                <el-button @click="metricDialogVisible = false">取消</el-button>
                                <el-button type="primary" @click="saveMetric">
                                    {{ isEditingMetric ? '保存修改' : '创建指标' }}
                                </el-button>
                            </span>
                        </template>
                    </el-dialog>
                </div>

                <!-- AI分析页面 -->
                <div v-if="currentTab === 'ai'" class="data-ai">
                    <!-- 页面标题和操作 -->
                    <div class="ai-header">
                        <div class="ai-actions">
                            <el-button type="primary" @click="generateNewReport">
                                <i class="fas fa-magic"></i>
                                生成新报告
                            </el-button>
                            <el-button @click="refreshAIData">
                                <i class="fas fa-sync-alt"></i>
                                刷新数据
                            </el-button>
                        </div>
                    </div>
                
                    <!-- 分析报告生成区域 -->
                    <div class="ai-section">
                        <div class="section-header">
                            <h3><i class="fas fa-file-alt"></i> 分析报告生成</h3>
                            <div class="section-subtitle">使用AI分析生成服务质量评估报告</div>
                        </div>
                        
                        <div class="report-generation">
                            <div class="generation-form">
                                <div class="form-row">
                                    <label>报告类型</label>
                                    <el-select v-model="reportType" placeholder="选择报告类型" style="width: 300px;">
                                        <el-option label="服务质量评估报告" value="quality"></el-option>
                                        <el-option label="用户满意度分析报告" value="satisfaction"></el-option>
                                        <el-option label="机器人性能分析报告" value="performance"></el-option>
                                        <el-option label="异常趋势分析报告" value="exception"></el-option>
                                        <el-option label="综合运营报告" value="overall"></el-option>
                                    </el-select>
                                </div>
                                
                                <div class="form-row">
                                    <label>时间范围</label>
                                    <el-date-picker
                                        v-model="reportDateRange"
                                        type="daterange"
                                        range-separator="至"
                                        start-placeholder="开始日期"
                                        end-placeholder="结束日期"
                                        style="width: 300px;"
                                    ></el-date-picker>
                                </div>
                                
                                <div class="form-row">
                                    <label>分析维度</label>
                                    <el-checkbox-group v-model="reportDimensions">
                                        <el-checkbox label="responseTime">响应时间</el-checkbox>
                                        <el-checkbox label="accuracy">准确率</el-checkbox>
                                        <el-checkbox label="satisfaction">用户满意度</el-checkbox>
                                        <el-checkbox label="exception">异常情况</el-checkbox>
                                        <el-checkbox label="trend">趋势分析</el-checkbox>
                                    </el-checkbox-group>
                                </div>
                                
                                <div class="form-row">
                                    <label>报告深度</label>
                                    <el-radio-group v-model="reportDepth">
                                        <el-radio label="summary">摘要版</el-radio>
                                        <el-radio label="standard">标准版</el-radio>
                                        <el-radio label="detailed">详细版</el-radio>
                                    </el-radio-group>
                                </div>
                                
                                <div class="form-actions">
                                    <el-button type="primary" @click="startGeneratingReport" :loading="generatingReport">
                                        <i class="fas fa-play"></i>
                                        开始生成报告
                                    </el-button>
                                    <el-button @click="resetReportForm">
                                        <i class="fas fa-undo"></i>
                                        重置
                                    </el-button>
                                </div>
                            </div>
                            
                            <div class="report-preview">
                                <div class="preview-header">
                                    <h4>报告预览</h4>
                                    <span class="preview-status" :class="previewStatusClass">{{ previewStatusText }}</span>
                                </div>
                                
                                <div class="preview-content" v-if="activeReport">
                                    <div class="preview-card">
                                        <div class="preview-title">{{ activeReport.title }}</div>
                                        <div class="preview-meta">
                                            <span><i class="fas fa-calendar"></i> {{ activeReport.date }}</span>
                                            <span><i class="fas fa-clock"></i> {{ activeReport.duration }}</span>
                                            <span><i class="fas fa-file"></i> {{ activeReport.pages }} 页</span>
                                        </div>
                                        
                                        <div class="preview-summary">
                                            <h5>核心发现</h5>
                                            <ul>
                                                <li v-for="finding in activeReport.findings" :key="finding.id">
                                                    <i class="fas fa-bullseye"></i> {{ finding.text }}
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <div class="preview-actions">
                                            <el-button size="small" @click="downloadReport(activeReport.id)">
                                                <i class="fas fa-download"></i> 下载
                                            </el-button>
                                            <el-button size="small" @click="viewReportDetail(activeReport.id)">
                                                <i class="fas fa-eye"></i> 查看详情
                                            </el-button>
                                            <el-button size="small" @click="shareReport(activeReport.id)">
                                                <i class="fas fa-share-alt"></i> 分享
                                            </el-button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="no-preview" v-else>
                                    <i class="fas fa-file-import"></i>
                                    <p>选择参数并生成报告后，将在此处显示预览</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 历史报告列表 -->
                        <div class="historical-reports">
                            <div class="reports-header">
                                <h4>历史报告列表</h4>
                                <el-input
                                    v-model="reportSearch"
                                    placeholder="搜索报告"
                                    size="small"
                                    style="width: 200px;"
                                >
                                    <template #prefix>
                                        <i class="fas fa-search"></i>
                                    </template>
                                </el-input>
                            </div>
                            
                            <div class="reports-list">
                                <el-table :data="filteredReports" style="width: 100%">
                                    <el-table-column prop="title" label="报告名称" width="250">
                                        <template #default="scope">
                                            <div class="report-title-cell">
                                                <i class="fas fa-file-alt" :style="{color: scope.row.typeColor}"></i>
                                                <span>{{ scope.row.title }}</span>
                                            </div>
                                        </template>
                                    </el-table-column>
                                    <el-table-column prop="type" label="类型" width="120"></el-table-column>
                                    <el-table-column prop="date" label="生成时间" width="180"></el-table-column>
                                    <el-table-column prop="duration" label="分析耗时" width="100"></el-table-column>
                                    <el-table-column label="状态" width="100">
                                        <template #default="scope">
                                            <el-tag :type="scope.row.status === 'completed' ? 'success' : 'warning'" size="small">
                                                {{ scope.row.status === 'completed' ? '已完成' : '处理中' }}
                                            </el-tag>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="操作" width="200">
                                        <template #default="scope">
                                            <el-button size="small" @click="viewReport(scope.row)">查看</el-button>
                                            <el-button size="small" @click="downloadReport(scope.row.id)">下载</el-button>
                                            <el-button size="small" type="danger" @click="deleteReport(scope.row.id)">删除</el-button>
                                        </template>
                                    </el-table-column>
                                </el-table>
                            </div>
                        </div>
                    </div>
                
                    <!-- 问题智能分类展示 -->
                    <div class="ai-section">
                        <div class="section-header">
                            <h3><i class="fas fa-tags"></i> 问题智能分类</h3>
                            <div class="section-subtitle">AI自动识别和分类的问题类型分布</div>
                        </div>
                        
                        <div class="problem-classification">
                            <!-- 分类概览卡片 -->
                            <div class="classification-overview">
                                <div class="overview-card">
                                    <div class="overview-icon" style="background-color: #e6f7ff;">
                                        <i class="fas fa-exclamation-circle" style="color: #1890ff;"></i>
                                    </div>
                                    <div class="overview-content">
                                        <div class="overview-value">{{ classificationStats.total }}</div>
                                        <div class="overview-label">总问题数</div>
                                    </div>
                                </div>
                                
                                <div class="overview-card">
                                    <div class="overview-icon" style="background-color: #f6ffed;">
                                        <i class="fas fa-tags" style="color: #52c41a;"></i>
                                    </div>
                                    <div class="overview-content">
                                        <div class="overview-value">{{ classificationStats.categories }}</div>
                                        <div class="overview-label">分类数量</div>
                                    </div>
                                </div>
                                
                                <div class="overview-card">
                                    <div class="overview-icon" style="background-color: #fff7e6;">
                                        <i class="fas fa-chart-line" style="color: #fa8c16;"></i>
                                    </div>
                                    <div class="overview-content">
                                        <div class="overview-value">{{ classificationStats.trend }}%</div>
                                        <div class="overview-label">周环比变化</div>
                                    </div>
                                </div>
                                
                                <div class="overview-card">
                                    <div class="overview-icon" style="background-color: #fff1f0;">
                                        <i class="fas fa-clock" style="color: #f5222d;"></i>
                                    </div>
                                    <div class="overview-content">
                                        <div class="overview-value">{{ classificationStats.avgResponse }}</div>
                                        <div class="overview-label">平均处理时间</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 分类图表和列表 -->
                            <div class="classification-details">
                                <div class="classification-chart">
                                    <div class="chart-header">
                                        <h4>问题分类分布</h4>
                                        <el-select v-model="classificationTimeRange" size="small" style="width: 120px;">
                                            <el-option label="本周" value="week"></el-option>
                                            <el-option label="本月" value="month"></el-option>
                                            <el-option label="本年" value="year"></el-option>
                                        </el-select>
                                    </div>
                                    
                                    <div class="chart-content">
                                        <div class="distribution-chart">
                                            <!-- 饼图展示 -->
                                            <div class="pie-chart-container">
                                                <div class="pie-chart" :style="pieChartStyle">
                                                    <div class="pie-segment" 
                                                         v-for="segment in pieSegments" 
                                                         :key="segment.id"
                                                         :style="segment.style"
                                                         :title="`${segment.name}: ${segment.percentage}%`">
                                                    </div>
                                                </div>
                                                <div class="chart-center">
                                                    <div class="center-value">{{ classificationStats.total }}</div>
                                                    <div class="center-label">问题总数</div>
                                                </div>
                                            </div>
                                            
                                            <div class="chart-legend">
                                                <div class="legend-item" v-for="category in problemCategories" :key="category.id">
                                                    <span class="legend-color" :style="{backgroundColor: category.color}"></span>
                                                    <span class="legend-text">{{ category.name }} ({{ category.count }})</span>
                                                    <span class="legend-percentage">{{ category.percentage }}%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="classification-list">
                                    <div class="list-header">
                                        <h4>分类详情</h4>
                                        <el-button size="small" @click="exportClassifications">
                                            <i class="fas fa-download"></i> 导出
                                        </el-button>
                                    </div>
                                    
                                    <div class="list-content">
                                        <el-table :data="problemCategories" style="width: 100%" height="300">
                                            <el-table-column label="分类" width="180">
                                                <template #default="scope">
                                                    <div class="category-cell">
                                                        <span class="category-color" :style="{backgroundColor: scope.row.color}"></span>
                                                        <span class="category-name">{{ scope.row.name }}</span>
                                                    </div>
                                                </template>
                                            </el-table-column>
                                            <el-table-column prop="count" label="问题数量" width="100">
                                                <template #default="scope">
                                                    <el-tag size="small">{{ scope.row.count }}</el-tag>
                                                </template>
                                            </el-table-column>
                                            <el-table-column prop="percentage" label="占比" width="100">
                                                <template #default="scope">
                                                    {{ scope.row.percentage }}%
                                                </template>
                                            </el-table-column>
                                            <el-table-column label="趋势" width="120">
                                                <template #default="scope">
                                                    <div class="trend-cell" :class="scope.row.trend > 0 ? 'up' : scope.row.trend < 0 ? 'down' : 'stable'">
                                                        <i class="fas" :class="getTrendIcon(scope.row.trend)"></i>
                                                        <span>{{ scope.row.trend > 0 ? '+' : '' }}{{ scope.row.trend }}%</span>
                                                    </div>
                                                </template>
                                            </el-table-column>
                                            <el-table-column label="处理建议">
                                                <template #default="scope">
                                                    <div class="suggestion-cell">
                                                        {{ scope.row.suggestion }}
                                                    </div>
                                                </template>
                                            </el-table-column>
                                            <el-table-column label="操作" width="120">
                                                <template #default="scope">
                                                    <el-button size="small" @click="viewCategoryDetail(scope.row)">
                                                        详情
                                                    </el-button>
                                                </template>
                                            </el-table-column>
                                        </el-table>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 热门问题示例 -->
                            <div class="hot-problems">
                                <div class="hot-header">
                                    <h4>热门问题示例</h4>
                                    <span class="hot-subtitle">AI识别的高频问题</span>
                                </div>
                                
                                <div class="hot-content">
                                    <div class="problem-examples">
                                        <div class="example-card" v-for="problem in hotProblems" :key="problem.id">
                                            <div class="example-header">
                                                <span class="problem-category" :style="{backgroundColor: problem.color}">
                                                    {{ problem.category }}
                                                </span>
                                                <span class="problem-frequency">
                                                    <i class="fas fa-chart-bar"></i> {{ problem.frequency }}次
                                                </span>
                                            </div>
                                            <div class="example-body">
                                                <div class="problem-text">{{ problem.text }}</div>
                                                <div class="problem-meta">
                                                    <span><i class="fas fa-clock"></i> 最近出现: {{ problem.lastOccurred }}</span>
                                                    <span><i class="fas fa-user"></i> 影响用户: {{ problem.affectedUsers }}</span>
                                                </div>
                                            </div>
                                            <div class="example-footer">
                                                <el-tag size="small" :type="problem.priority === 'high' ? 'danger' : problem.priority === 'medium' ? 'warning' : ''">
                                                    {{ problem.priority === 'high' ? '高优先级' : problem.priority === 'medium' ? '中优先级' : '低优先级' }}
                                                </el-tag>
                                                <el-button size="small" type="text" @click="viewProblemDetail(problem)">
                                                    <i class="fas fa-chevron-right"></i>
                                                </el-button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus/dist/index.full.js"></script>
    <script>
        const { createApp, ref, computed, onMounted, onUnmounted } = Vue;
        const { ElMessage, ElMessageBox } = ElementPlus;
        
        createApp({
            setup() {
                // 默认展开数据管理与分析
                const expandedMenu = ref('dataAnalysis');
                
                // 当前 Tab（根据 URL hash 决定）
                const currentTab = ref('dashboard');
                
                // 页面标题映射
                const titles = {
                    'tools': '数据管理工具',
                    'dashboard': '数据仪表盘',
                    'metrics': '指标分析',
                    'ai': 'AI分析'
                };
                
                const pageTitle = computed(() => {
                    return titles[currentTab.value] || '数据管理与分析';
                });
                
                // 切换菜单展开（修复：确保可以关闭）
                const toggleMenu = (menuName) => {
                    if (expandedMenu.value === menuName) {
                        expandedMenu.value = ''; // 点击已展开的则收起
                    } else {
                        expandedMenu.value = menuName; // 展开新的
                    }
                };
                
                // 子菜单点击处理，阻止默认跳转并手动切换
                const handleSubMenuClick = (tab) => {
 					// 阻止默认的页面刷新行为，改为客户端路由
                    // 注意：这里我们不阻止默认行为，而是让 hash 变化触发 updateFromHash
                };
            
                // ========== 数据清洗规则配置 ==========
                const cleaningRules = ref({
                    fieldValidation: 'mark',
                    timeFormat: 'iso8601',
                    statusMapping: 'enum',
                    outlierFilter: 'mark',
                    textCleaning: 'html',
                    duplicateHandling: 'keep_first',
                    executionType: 'schedule',
                    scheduleFrequency: 'daily',
                    scheduleTime: '02:00',
                    scheduleDay: '1'
                });
                
                const dataSources = ref({
                    interactionLogs: true,
                    robotStatus: true,
                    userFeedback: true,
                    taskExecution: false,
                    performance: true,
                    errorLogs: false
                });
                
                // 计算已选择的数据源数量
                const selectedDataSourcesCount = computed(() => {
                    return Object.values(dataSources.value).filter(Boolean).length;
                });
                
                // 保存清洗规则
                const saveCleaningRules = () => {
                    ElMessage.success('数据清洗规则已保存');
                };
                
                // 测试清洗规则
                const testCleaningRules = () => {
                    ElMessage.info('测试规则功能正在执行...');
                };
                
                // 立即执行清洗
                const executeCleaningNow = () => {
                    ElMessage.info('正在执行数据清洗...');
                };
            
                // ========== 数据仪表盘部分 ==========
                const dashboardTimeRange = ref('today');
                const feedbackType = ref('all');
                
                // 机器人统计数据
                const robotStats = ref({
                    total: 156,
                    online: 117,
                    offline: 15,
                    busy: 24,
                    byGroup: {
                        customerService: 45,
                        operations: 32,
                        quality: 40
                    },
                    totalByGroup: {
                        customerService: 50,
                        operations: 40,
                        quality: 50
                    }
                });
                
                // 异常统计数据
                const exceptionStats = ref({
                    today: 23,
                    week: 156,
                    trendChange: 12,
                    trend: [
                        { day: '周一', count: 18 },
                        { day: '周二', count: 22 },
                        { day: '周三', count: 25 },
                        { day: '周四', count: 20 },
                        { day: '周五', count: 23 },
                        { day: '周六', count: 15 },
                        { day: '周日', count: 12 }
                    ]
                });
                
                // 反馈统计数据
                const feedbackStats = ref({
                    today: 42,
                    total: 1256,
                    satisfaction: 87
                });
                
                // 任务统计数据
                const taskStats = ref({
                    completed: 1245
                });
                
                // 最近上线机器人
                const recentOnlineRobots = ref([
                    { id: 1, name: '客服机器人-01', time: '10:25' },
                    { id: 2, name: '运维机器人-03', time: '09:45' },
                    { id: 3, name: '质检机器人-07', time: '09:20' },
                    { id: 4, name: '客服机器人-12', time: '08:55' }
                ]);
                
                // 词云数据
                const wordCloud = ref([
                    { text: '响应快', size: 24, color: '#1890ff' },
                    { text: '准确', size: 22, color: '#52c41a' },
                    { text: '专业', size: 20, color: '#1890ff' },
                    { text: '耐心', size: 18, color: '#52c41a' },
                    { text: '效率高', size: 22, color: '#1890ff' },
                    { text: '服务好', size: 24, color: '#52c41a' },
                    { text: '智能', size: 20, color: '#1890ff' },
                    { text: '有时延迟', size: 16, color: '#fa8c16' },
                    { text: '偶尔错误', size: 14, color: '#f5222d' }
                ]);
                
                // 刷新仪表盘
                const refreshDashboard = () => {
                    ElMessage.info('正在刷新仪表盘数据...');
                };
                
                // 刷新记录方法
                const refreshRecords = () => {
                    ElMessage.info('正在刷新处理记录...');
                };
                
                // 查看全部记录方法
                const showAllRecords = () => {
                    ElMessage.info('跳转到完整记录页面...');
                };
                
                // 计算下次执行时间
                const calculateNextExecutionTime = () => {
                    const now = new Date();
                    const next = new Date();
                    
                    if (cleaningRules.value.scheduleFrequency === 'hourly') {
                        next.setHours(now.getHours() + 1, 0, 0, 0);
                    } else if (cleaningRules.value.scheduleFrequency === 'daily') {
                        const [hours, minutes] = cleaningRules.value.scheduleTime.split(':');
                        next.setDate(now.getDate() + 1);
                        next.setHours(parseInt(hours), parseInt(minutes), 0, 0);
                    } else if (cleaningRules.value.scheduleFrequency === 'weekly') {
                        const targetDay = parseInt(cleaningRules.value.scheduleDay);
                        const currentDay = now.getDay();
                        const daysToAdd = (targetDay - currentDay + 7) % 7 || 7;
                        next.setDate(now.getDate() + daysToAdd);
                        next.setHours(2, 0, 0, 0);
                    }
                    
                    return next.toLocaleString('zh-CN', {
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit',
                        hour12: false
                    });
                };
                
                // 全选数据源
                const selectAllSources = () => {
                    const allChecked = selectedDataSourcesCount.value === Object.keys(dataSources.value).length;
                    Object.keys(dataSources.value).forEach(key => {
                        dataSources.value[key] = !allChecked;
                    });
                };
            
                // ========== 指标分析页面 ==========
                const metricSearch = ref('');
                const metricCategory = ref('');
                const metricDialogVisible = ref(false);
                const isEditingMetric = ref(false);
                const tagInputVisible = ref(false);
                const tagInputValue = ref('');
                const currentMetricId = ref('');
                
                // 响应时间数据
                const responseTimeData = ref([
                    { day: '周一', value: 2.5 },
                    { day: '周二', value: 2.3 },
                    { day: '周三', value: 2.4 },
                    { day: '周四', value: 2.2 },
                    { day: '周五', value: 2.3 },
                    { day: '周六', value: 2.1 },
                    { day: '周日', value: 2.0 }
                ]);
                
                // 指标表单
                const metricForm = ref({
                    name: '',
                    category: '',
                    description: '',
                    calculationType: 'average',
                    dataSources: [],
                    updateFrequency: 'daily',
                    chartType: 'bar',
                    enableAlert: false,
                    alertThreshold: 0,
                    tags: []
                });
                
                // 显示创建指标对话框
                const showCreateMetricDialog = () => {
                    isEditingMetric.value = false;
                    resetMetricForm();
                    metricDialogVisible.value = true;
                };
                
                // 处理指标操作
                const handleMetricCommand = (metricId, command) => {
                    switch (command) {
                        case 'edit':
                            editMetric(metricId);
                            break;
                        case 'configure':
                            configureMetric(metricId);
                            break;
                        case 'disable':
                            disableMetric(metricId);
                            break;
                        case 'delete':
                            deleteMetric(metricId);
                            break;
                        case 'export':
                            exportMetricData(metricId);
                            break;
                    }
                };
                
                // 编辑指标
                const editMetric = (metricId) => {
                    isEditingMetric.value = true;
                    currentMetricId.value = metricId;
                    
                    // 模拟加载指标数据
                    if (metricId === 'satisfaction') {
                        metricForm.value = {
                            name: '用户满意度分布',
                            category: 'satisfaction',
                            description: '统计用户对机器人服务的满意度评分分布情况',
                            calculationType: 'percentage',
                            dataSources: ['feedback'],
                            updateFrequency: 'daily',
                            chartType: 'pie',
                            enableAlert: true,
                            alertThreshold: 3.5,
                            tags: ['满意度', '用户反馈']
                        };
                    } else if (metricId === 'response') {
                        metricForm.value = {
                            name: '平均响应时间',
                            category: 'response',
                            description: '监控机器人从接收请求到给出响应的平均时间',
                            calculationType: 'average',
                            dataSources: ['interaction', 'task'],
                            updateFrequency: 'realtime',
                            chartType: 'line',
                            enableAlert: true,
                            alertThreshold: 3.0,
                            tags: ['性能指标', '实时监控']
                        };
                    }
                    
                    metricDialogVisible.value = true;
                };
                
                // 配置指标
                const configureMetric = (metricId) => {
                    ElMessage.info(`开始配置指标: ${metricId}`);
                };
                
                // 停用指标
                const disableMetric = (metricId) => {
                    ElMessage.warning(`停用指标: ${metricId}`);
                };
                
                // 删除指标
                const deleteMetric = (metricId) => {
                    ElMessageBox.confirm(
                        '确定要删除这个指标吗？删除后无法恢复。',
                        '确认删除',
                        {
                            confirmButtonText: '确定',
                            cancelButtonText: '取消',
                            type: 'warning',
                        }
                    ).then(() => {
                        ElMessage.success('指标已删除');
                    });
                };
                
                // 导出指标数据
                const exportMetricData = (metricId) => {
                    ElMessage.info(`正在导出 ${metricId} 的数据...`);
                };
                
                // 保存指标
                const saveMetric = () => {
                    if (!metricForm.value.name) {
                        ElMessage.warning('请填写指标名称');
                        return;
                    }
                    
                    if (isEditingMetric.value) {
                        ElMessage.success('指标配置已更新');
                    } else {
                        ElMessage.success('新指标已创建');
                    }
                    
                    metricDialogVisible.value = false;
                    resetMetricForm();
                };
                
                // 重置指标表单
                const resetMetricForm = () => {
                    metricForm.value = {
                        name: '',
                        category: '',
                        description: '',
                        calculationType: 'average',
                        dataSources: [],
                        updateFrequency: 'daily',
                        chartType: 'bar',
                        enableAlert: false,
                        alertThreshold: 0,
                        tags: []
                    };
                };
                
                // 标签管理
                const showTagInput = () => {
                    tagInputVisible.value = true;
                };
                
                const addMetricTag = () => {
                    if (tagInputValue.value) {
                        metricForm.value.tags.push(tagInputValue.value);
                        tagInputValue.value = '';
                    }
                    tagInputVisible.value = false;
                };
                
                const removeMetricTag = (tag) => {
                    metricForm.value.tags = metricForm.value.tags.filter(t => t !== tag);
                };

                //ai分析
                // 在setup()函数中添加
                const reportType = ref('quality');
                const reportDateRange = ref([]);
                const reportDimensions = ref(['responseTime', 'accuracy', 'satisfaction']);
                const reportDepth = ref('standard');
                const generatingReport = ref(false);
                const activeReport = ref(null);
                const previewStatusText = ref('未生成报告');
                const previewStatusClass = ref('empty');
                const reportSearch = ref('');
                
                // 问题分类相关数据
                const classificationTimeRange = ref('week');
                const classificationStats = ref({
                    total: 1245,
                    categories: 8,
                    trend: 12,
                    avgResponse: '2.3小时'
                });
                
                // 问题分类数据
                const problemCategories = ref([
                    { id: 1, name: '响应时间过长', color: '#f5222d', count: 325, percentage: 26, trend: 8, suggestion: '优化服务器配置，增加缓存机制' },
                    { id: 2, name: '回答不准确', color: '#fa8c16', count: 280, percentage: 22, trend: -5, suggestion: '更新知识库，加强AI训练' },
                    { id: 3, name: '服务中断', color: '#faad14', count: 195, percentage: 16, trend: 12, suggestion: '检查服务器稳定性，增加冗余' },
                    { id: 4, name: '功能缺失', color: '#1890ff', count: 156, percentage: 12, trend: 3, suggestion: '收集用户反馈，规划新功能' },
                    { id: 5, name: '用户体验差', color: '#52c41a', count: 125, percentage: 10, trend: -2, suggestion: '优化交互流程，改进UI设计' },
                    { id: 6, name: '数据错误', color: '#722ed1', count: 89, percentage: 7, trend: 15, suggestion: '加强数据验证机制' },
                    { id: 7, name: '权限问题', color: '#eb2f96', count: 56, percentage: 5, trend: 0, suggestion: '检查权限配置，优化访问控制' },
                    { id: 8, name: '其他问题', color: '#595959', count: 19, percentage: 2, trend: -8, suggestion: '持续监控，分类处理' }
                ]);
                
                // 热门问题示例
                const hotProblems = ref([
                    { id: 1, category: '响应时间过长', color: '#f5222d', text: '查询用户订单信息时响应时间超过5秒', frequency: 45, lastOccurred: '今天 10:30', affectedUsers: 23, priority: 'high' },
                    { id: 2, category: '回答不准确', color: '#fa8c16', text: '无法正确识别用户关于退款政策的询问', frequency: 38, lastOccurred: '今天 09:15', affectedUsers: 19, priority: 'high' },
                    { id: 3, category: '服务中断', color: '#faad14', text: '客服机器人服务在凌晨2点-3点间中断', frequency: 12, lastOccurred: '昨天 02:30', affectedUsers: 156, priority: 'high' },
                    { id: 4, category: '功能缺失', color: '#1890ff', text: '无法处理用户的多语言查询请求', frequency: 25, lastOccurred: '今天 11:45', affectedUsers: 42, priority: 'medium' }
                ]);
                
                // 历史报告数据
                const historicalReports = ref([
                    { id: 1, title: '服务质量评估报告 - 2024年1月', type: '服务质量评估报告', date: '2024-01-28 14:30', duration: '45秒', pages: 12, status: 'completed', typeColor: '#1890ff' },
                    { id: 2, title: '用户满意度分析报告', type: '用户满意度分析报告', date: '2024-01-27 10:15', duration: '1分20秒', pages: 18, status: 'completed', typeColor: '#52c41a' },
                    { id: 3, title: '机器人性能周报', type: '机器人性能分析报告', date: '2024-01-26 09:00', duration: '58秒', pages: 8, status: 'completed', typeColor: '#fa8c16' },
                    { id: 4, title: '异常趋势分析报告', type: '异常趋势分析报告', date: '2024-01-25 16:45', duration: '1分30秒', pages: 15, status: 'completed', typeColor: '#f5222d' }
                ]);
                
                // 计算饼图样式
                const pieChartStyle = computed(() => {
                    let gradientString = '';
                    let accumulatedPercent = 0;
                    
                    problemCategories.value.forEach((category, index) => {
                        const startPercent = accumulatedPercent;
                        const endPercent = accumulatedPercent + category.percentage;
                        
                        if (index === 0) {
                            gradientString += `${category.color} 0% ${endPercent}%`;
                        } else {
                            gradientString += `, ${category.color} ${startPercent}% ${endPercent}%`;
                        }
                        
                        accumulatedPercent = endPercent;
                    });
                    
                    return {
                        background: `conic-gradient(${gradientString})`
                    };
                });
                
                // 饼图分段数据
                const pieSegments = computed(() => {
                    return problemCategories.value.map(category => ({
                        id: category.id,
                        name: category.name,
                        percentage: category.percentage,
                        style: { backgroundColor: category.color }
                    }));
                });
                
                // 过滤历史报告
                const filteredReports = computed(() => {
                    if (!reportSearch.value) {
                        return historicalReports.value;
                    }
                    return historicalReports.value.filter(report => 
                        report.title.toLowerCase().includes(reportSearch.value.toLowerCase()) ||
                        report.type.toLowerCase().includes(reportSearch.value.toLowerCase())
                    );
                });
                
                // 生成新报告
                const generateNewReport = () => {
                    ElMessage.info('准备生成新报告，请填写参数');
                };
                
                // 开始生成报告
                const startGeneratingReport = () => {
                    if (!reportDateRange.value || reportDateRange.value.length === 0) {
                        ElMessage.warning('请选择时间范围');
                        return;
                    }
                    
                    generatingReport.value = true;
                    previewStatusText.value = '正在生成报告...';
                    previewStatusClass.value = 'processing';
                    
                    // 模拟生成报告的过程
                    setTimeout(() => {
                        activeReport.value = {
                            id: Date.now(),
                            title: `${getReportTypeText(reportType.value)} - ${formatDateRange(reportDateRange.value)}`,
                            date: new Date().toLocaleDateString('zh-CN'),
                            duration: '1分15秒',
                            pages: 15,
                            findings: [
                                { id: 1, text: '整体服务质量评分为8.7/10，较上月提升5%' },
                                { id: 2, text: '平均响应时间为2.3秒，达到优秀水平' },
                                { id: 3, text: '用户满意度为92%，较上月提升3个百分点' },
                                { id: 4, text: '发现3个主要问题类型需要重点关注' }
                            ]
                        };
                        
                        generatingReport.value = false;
                        previewStatusText.value = '报告已生成';
                        previewStatusClass.value = 'ready';
                        
                        ElMessage.success('报告生成完成！');
                    }, 2000);
                };
                
                // 重置报告表单
                const resetReportForm = () => {
                    reportType.value = 'quality';
                    reportDateRange.value = [];
                    reportDimensions.value = ['responseTime', 'accuracy', 'satisfaction'];
                    reportDepth.value = 'standard';
                    activeReport.value = null;
                    previewStatusText.value = '未生成报告';
                    previewStatusClass.value = 'empty';
                };
                
                // 获取报告类型文本
                const getReportTypeText = (type) => {
                    const types = {
                        quality: '服务质量评估报告',
                        satisfaction: '用户满意度分析报告',
                        performance: '机器人性能分析报告',
                        exception: '异常趋势分析报告',
                        overall: '综合运营报告'
                    };
                    return types[type] || '报告';
                };
                
                // 格式化日期范围
                const formatDateRange = (range) => {
                    if (!range || range.length !== 2) return '';
                    const start = new Date(range[0]).toLocaleDateString('zh-CN');
                    const end = new Date(range[1]).toLocaleDateString('zh-CN');
                    return `${start} 至 ${end}`;
                };
                
                // 下载报告
                const downloadReport = (reportId) => {
                    ElMessage.info(`正在下载报告 ${reportId}`);
                };
                
                // 查看报告详情
                const viewReportDetail = (reportId) => {
                    ElMessage.info(`查看报告详情 ${reportId}`);
                };
                
                // 查看报告
                const viewReport = (report) => {
                    activeReport.value = report;
                    previewStatusText.value = '报告已加载';
                    previewStatusClass.value = 'ready';
                    ElMessage.info(`查看报告: ${report.title}`);
                };
                
                // 分享报告
                const shareReport = (reportId) => {
                    ElMessage.info(`分享报告 ${reportId}`);
                };
                
                // 删除报告
                const deleteReport = (reportId) => {
                    ElMessageBox.confirm(
                        '确定要删除这个报告吗？删除后无法恢复。',
                        '确认删除',
                        {
                            confirmButtonText: '确定',
                            cancelButtonText: '取消',
                            type: 'warning',
                        }
                    ).then(() => {
                        historicalReports.value = historicalReports.value.filter(report => report.id !== reportId);
                        ElMessage.success('报告已删除');
                    });
                };
                
                // 刷新AI数据
                const refreshAIData = () => {
                    ElMessage.success('AI分析数据已刷新');
                };
                
                // 导出分类数据
                const exportClassifications = () => {
                    ElMessage.info('正在导出问题分类数据...');
                };
                
                // 获取趋势图标
                const getTrendIcon = (trend) => {
                    if (trend > 0) return 'fa-arrow-up';
                    if (trend < 0) return 'fa-arrow-down';
                    return 'fa-minus';
                };
                
                // 查看分类详情
                const viewCategoryDetail = (category) => {
                    ElMessage.info(`查看分类详情: ${category.name}`);
                };
                
                // 查看问题详情
                const viewProblemDetail = (problem) => {
                    ElMessage.info(`查看问题详情: ${problem.text}`);
                };
                
                // 刷新数据
                const refreshData = () => {
                    ElMessage.success('数据已刷新');
                };
                
                // 从 URL hash 更新当前 Tab
                const updateFromHash = () => {
				    const hash = window.location.hash.replace('#', '');
				    if (['tools', 'metrics', 'ai', 'dashboard'].includes(hash)) {
				        currentTab.value = hash;
				    } else {
				        currentTab.value = 'dashboard'; // 默认显示仪表盘
				    }
                };
                
                onMounted(() => {
                    updateFromHash();
                    window.addEventListener('hashchange', updateFromHash);
                });
                
                onUnmounted(() => {
                    window.removeEventListener('hashchange', updateFromHash);
                });
                
                // 返回所有在模板中使用的变量和方法
                return {
                    // 基础
                    expandedMenu,
                    currentTab,
                    pageTitle,
                    toggleMenu,
                    handleSubMenuClick,
                    refreshData,
                    
                    // 数据清洗规则配置
                    cleaningRules,
                    dataSources,
                    selectedDataSourcesCount,
                    saveCleaningRules,
                    testCleaningRules,
                    executeCleaningNow,
                    calculateNextExecutionTime,
                    selectAllSources,
                    
                    // 数据仪表盘
                    dashboardTimeRange,
                    feedbackType,
                    robotStats,
                    exceptionStats,
                    feedbackStats,
                    taskStats,
                    recentOnlineRobots,
                    wordCloud,
                    refreshDashboard,
                    refreshRecords,
                    showAllRecords,
                    
                    // 指标分析
                    metricSearch,
                    metricCategory,
                    metricDialogVisible,
                    isEditingMetric,
                    tagInputVisible,
                    tagInputValue,
                    currentMetricId,
                    responseTimeData,
                    metricForm,
                    showCreateMetricDialog,
                    handleMetricCommand,
                    saveMetric,
                    resetMetricForm,
                    showTagInput,
                    addMetricTag,
                    removeMetricTag,
                    editMetric,
                    configureMetric,
                    disableMetric,
                    deleteMetric,
                    exportMetricData,
                    
                    // AI分析（新增）
                    // 报告生成相关
                    reportType,
                    reportDateRange,
                    reportDimensions,
                    reportDepth,
                    generatingReport,
                    activeReport,
                    previewStatusText,
                    previewStatusClass,
                    reportSearch,
                    historicalReports,
                    
                    // 问题分类相关
                    classificationTimeRange,
                    classificationStats,
                    problemCategories,
                    hotProblems,
                    
                    // 计算属性
                    pieChartStyle,
                    pieSegments,
                    filteredReports,
                    
                    // AI分析方法
                    generateNewReport,
                    startGeneratingReport,
                    resetReportForm,
                    getReportTypeText,
                    formatDateRange,
                    downloadReport,
                    viewReportDetail,
                    viewReport,
                    shareReport,
                    deleteReport,
                    refreshAIData,
                    exportClassifications,
                    getTrendIcon,
                    viewCategoryDetail,
                    viewProblemDetail
                };
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>















